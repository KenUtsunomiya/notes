# ロックの種類
---

## 一覧

| 名前            |               単位               | 目的                         |
| ------------- | :----------------------------: | -------------------------- |
|               |                                |                            |
| ギャップなしレコードロック |           インデックスレコード           | レコードの更新                    |
| レコードロック       |  インデックスレコード<br>＋<br>その手前のギャップ  | レコードの更新                    |
| ギャップロック       |       インデックスレコードの手前のギャップ       | レコードの更新                    |
| ネクストキーロック     | レコードロック<br>+<br>次のレコードの手前のギャップ | レコードの更新                    |
| メタデータロック      |              テーブル              | テーブル定義                     |
| インテンションロック    |              テーブル              | 共有ロックから排他ロックへのエスカレーションの保護  |
| グローバルリードロック   |            MySQL 全体            | トランザクション開始時点のサーバー全体の確実な一貫性 |
| ユーザー定義ロック     |           ユーザー定義名前空間           | アプリケーションでの任意ロック            |

## InnoDB レイヤーロック

| id       | val   | val_length |                   |
| -------- | ----- | ---------- | ----------------- |
|          |       |            |                   |
| infimum  |       |            |                   |
| [gap]    |       |            |                   |
| 1        | one   | 3          | id = 1 のギャップなしロック |
| [gap]    |       |            | id = 2 のレコードロック   |
| 2        | two   | 3          |                   |
| [gap]    |       |            |                   |
| 3        | three | 5          |                   |
| [gap]    |       |            | id = 5 のネクストキーロック |
| 5        | five  | 4          |                   |
| [gap]    |       |            |                   |
| supremum |       |            |                   |
